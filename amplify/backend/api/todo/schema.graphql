# https://docs.amplify.aws/cli-legacy/graphql-transformer/auth/#multiple-authorization-rules

type User @model
  @auth(rules: [
    { allow: owner },
    { allow: owner, ownerField: "friends", operations: [read] }
  ]) {
    owner: String! @primaryKey
    friends: [String]
    ToDoItems: [ToDoItem] @hasMany
  }

# https://docs.amplify.aws/cli/graphql/data-modeling/#configure-a-secondary-index
type ToDoItem @model 
@auth(rules: [
    { allow: owner },
  ]) {
  id: ID!
  title: String!
  description: String!
  user: User @belongsTo
}

type Note @model @auth(
  rules: [ 
    # Defaults to use the "owner" field.
    { allow: owner},

    # allow all authenticated users to read posts
    { allow: private, operations: [read] },
  ] 
){
  id: ID!
  name: String!
  description: String
}